(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{148:function(e,t,a){Promise.resolve().then(a.bind(a,8839)),Promise.resolve().then(a.bind(a,1417))},8839:function(e,t,a){"use strict";a.r(t),a.d(t,{TaskInput:function(){return o}});var s=a(3827),r=a(4090),n=a(483),i=a(1075);function o(){let[e,t]=(0,r.useState)(""),{processTaskInput:a,processing:o,error:l}=function(){let[e,t]=(0,r.useState)(!1),[a,s]=(0,r.useState)(null);return{processTaskInput:async function(e){let a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"default-user";try{var r,i;t(!0),s(null);let o=await n.h.processTask(e,a);if(o.success&&(null===(r=o.data)||void 0===r?void 0:r.tasks))return o.data.tasks;throw Error((null===(i=o.error)||void 0===i?void 0:i.message)||"Failed to process input")}catch(t){let e=t instanceof Error?t.message:"Failed to process task input";throw s(e),Error(e)}finally{t(!1)}},estimateTime:async(e,t,a)=>{try{var r,i;s(null);let o=await n.h.estimateTime(e,t,a);if(o.success&&(null===(r=o.data)||void 0===r?void 0:r.estimatedTime))return o.data.estimatedTime;throw Error((null===(i=o.error)||void 0===i?void 0:i.message)||"Failed to estimate time")}catch(t){let e=t instanceof Error?t.message:"Failed to estimate time";throw s(e),Error(e)}},processing:e,error:a}}(),{createTask:c,fetchTasks:d}=(0,i.X)("default-user"),[u,h]=(0,r.useState)(null),m=async s=>{if(s.preventDefault(),e.trim()&&!o)try{h(null);let s=await a(e.trim(),"default-user");console.log("AI processed tasks:",s),await d(),t("")}catch(e){console.error("Failed to process task:",e),h(e instanceof Error?e.message:"Failed to process task")}};return(0,s.jsxs)("div",{className:"w-full max-w-2xl mx-auto",children:[(0,s.jsxs)("form",{onSubmit:m,className:"space-y-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{htmlFor:"task-input",className:"block text-sm font-medium text-gray-700 mb-2",children:"Tell me what you need to do"}),(0,s.jsx)("textarea",{id:"task-input",value:e,onChange:e=>t(e.target.value),placeholder:"e.g., 'I need to clean the house before guests arrive this weekend, do grocery shopping, and prepare for Monday's presentation'",className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 resize-none",rows:4,disabled:o}),(u||l)&&(0,s.jsx)("p",{className:"mt-2 text-sm text-red-600",children:u||l})]}),(0,s.jsx)("button",{type:"submit",disabled:!e.trim()||o,className:"w-full bg-blue-600 text-white px-6 py-3 rounded-lg hover:bg-blue-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center space-x-2",children:o?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),(0,s.jsx)("span",{children:"Processing..."})]}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("span",{children:"\uD83E\uDDE0"}),(0,s.jsx)("span",{children:"Create Tasks"})]})})]}),(0,s.jsxs)("div",{className:"mt-4 text-sm text-gray-600",children:[(0,s.jsxs)("p",{children:["\uD83D\uDCA1 ",(0,s.jsx)("strong",{children:"Try saying:"})]}),(0,s.jsxs)("ul",{className:"mt-2 space-y-1 text-gray-500",children:[(0,s.jsx)("li",{children:'• "Schedule a dentist appointment and pick up dry cleaning"'}),(0,s.jsx)("li",{children:'• "Plan weekend meal prep and grocery shopping"'}),(0,s.jsx)("li",{children:'• "Organize kids\' school supplies before Monday"'})]})]})]})}},1417:function(e,t,a){"use strict";a.r(t),a.d(t,{TaskList:function(){return i}});var s=a(3827),r=a(1075),n=a(4090);function i(){let{tasks:e,loading:t,error:a,completeTask:i,deleteTask:o,fetchTasks:l}=(0,r.X)("default-user");(0,n.useEffect)(()=>{l().catch(console.error)},[l]);let c=async e=>{try{await i(e,0)}catch(e){console.error("Failed to complete task:",e),alert("Failed to complete task. Please try again.")}},d=async e=>{if(confirm("Are you sure you want to delete this task?"))try{await o(e)}catch(e){console.error("Failed to delete task:",e),alert("Failed to delete task. Please try again.")}};return t?(0,s.jsxs)("div",{className:"text-center py-8",children:[(0,s.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto"}),(0,s.jsx)("p",{className:"mt-4 text-gray-600",children:"Loading tasks..."})]}):a?(0,s.jsxs)("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:[(0,s.jsxs)("p",{className:"text-red-800",children:["Error loading tasks: ",a]}),(0,s.jsx)("button",{onClick:l,className:"mt-2 text-sm text-red-600 hover:text-red-800 underline",children:"Try again"})]}):0===e.length?(0,s.jsx)("div",{className:"text-center py-8",children:(0,s.jsx)("p",{className:"text-gray-600",children:"No tasks yet. Use the input above to create some tasks!"})}):(0,s.jsx)("div",{className:"space-y-6",children:(0,s.jsxs)("div",{children:[(0,s.jsx)("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Your Tasks"}),(0,s.jsx)("div",{className:"space-y-3",children:e.map(e=>(0,s.jsx)("div",{className:"bg-white border rounded-lg p-4",children:(0,s.jsxs)("div",{className:"flex items-start justify-between",children:[(0,s.jsxs)("div",{className:"flex-1",children:[(0,s.jsxs)("div",{className:"flex items-center space-x-2 mb-2",children:[(0,s.jsx)("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ".concat("household"===e.category?"bg-green-100 text-green-800":"work"===e.category?"bg-blue-100 text-blue-800":"personal"===e.category?"bg-purple-100 text-purple-800":"health"===e.category?"bg-red-100 text-red-800":"finance"===e.category?"bg-yellow-100 text-yellow-800":"bg-gray-100 text-gray-800"),children:e.category}),(0,s.jsxs)("span",{className:"text-sm text-gray-500",children:["urgent"===e.priority?"\uD83D\uDD34":"high"===e.priority?"\uD83D\uDFE0":"medium"===e.priority?"\uD83D\uDFE1":"\uD83D\uDFE2"," ",e.priority]})]}),(0,s.jsx)("h3",{className:"text-lg font-medium text-gray-900",children:e.title}),e.description&&(0,s.jsx)("p",{className:"mt-1 text-sm text-gray-600",children:e.description}),(0,s.jsxs)("div",{className:"flex items-center space-x-4 mt-2 text-sm text-gray-500",children:[(0,s.jsxs)("span",{children:["⏱️ ",e.estimatedTime," min"]}),(0,s.jsxs)("span",{children:["\uD83D\uDCCB ",e.status]}),(0,s.jsxs)("span",{children:["\uD83D\uDCC5 ",e.createdAt?new Date(e.createdAt).toLocaleDateString():"No date"]})]})]}),(0,s.jsxs)("div",{className:"flex space-x-2",children:["completed"!==e.status&&e._id&&(0,s.jsx)("button",{onClick:()=>c(e._id),className:"p-2 text-gray-400 hover:text-green-600 transition-colors",title:"Mark as complete",children:"✅"}),e._id&&(0,s.jsx)("button",{onClick:()=>d(e._id),className:"p-2 text-gray-400 hover:text-red-600 transition-colors",title:"Delete task",children:"\uD83D\uDDD1️"})]})]})},e._id))})]})})}},1075:function(e,t,a){"use strict";a.d(t,{X:function(){return n}});var s=a(4090),r=a(483);function n(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"default-user",[t,a]=(0,s.useState)([]),[n,i]=(0,s.useState)(!1),[o,l]=(0,s.useState)(null),c=(0,s.useCallback)(async()=>{try{i(!0),l(null);let t=await r.h.getTasks(e);if(t.success&&t.data)a(t.data);else throw Error(t.error||"Failed to fetch tasks")}catch(e){throw l(e instanceof Error?e.message:"Failed to fetch tasks"),e}finally{i(!1)}},[e]),d=(0,s.useCallback)(async t=>{try{l(null);let s=await r.h.createTask(t,e);if(s.success&&s.data)return a(e=>[...e,s.data]),s.data;throw Error(s.error||"Failed to create task")}catch(e){throw l(e instanceof Error?e.message:"Failed to create task"),e}},[e]);return{tasks:t,loading:n,error:o,fetchTasks:c,createTask:d,updateTask:(0,s.useCallback)(async(t,s)=>{try{l(null);let n=await r.h.updateTask(t,s,e);if(n.success&&n.data)return a(e=>e.map(e=>e._id===t?n.data:e)),n.data;throw Error(n.error||"Failed to update task")}catch(e){throw l(e instanceof Error?e.message:"Failed to update task"),e}},[e]),deleteTask:(0,s.useCallback)(async t=>{try{l(null);let s=await r.h.deleteTask(t,e);if(s.success)a(e=>e.filter(e=>e._id!==t));else throw Error(s.error||"Failed to delete task")}catch(e){throw l(e instanceof Error?e.message:"Failed to delete task"),e}},[e]),completeTask:(0,s.useCallback)(async(t,s)=>{try{l(null);let n=await r.h.completeTask(t,s,e);if(n.success&&n.data)return a(e=>e.map(e=>e._id===t?n.data:e)),n.data;throw Error(n.error||"Failed to complete task")}catch(e){throw l(e instanceof Error?e.message:"Failed to complete task"),e}},[e])}}},483:function(e,t,a){"use strict";a.d(t,{h:function(){return n}});let s="http://localhost:3001";if(console.log("Environment variables:",{NEXT_PUBLIC_API_URL:"http://localhost:3001",NODE_ENV:"production",API_URL:s}),!s)throw console.error("NEXT_PUBLIC_API_URL environment variable is not set!"),Error("API_URL is required in production");if(!s)throw Error("API_URL is not configured. Please set NEXT_PUBLIC_API_URL environment variable.");async function r(e){let t=await e.json();if(!e.ok)throw Error(t.error||"An error occurred");return t}let n={processTask:async(e,t)=>r(await fetch("".concat(s,"/api/ai/process-task?userId=").concat(t),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({input:e})})),estimateTime:async e=>r(await fetch("".concat(s,"/api/ai/estimate-time"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({task:e})})),getTasks:async e=>r(await fetch("".concat(s,"/api/tasks?userId=").concat(e))),createTask:async(e,t)=>r(await fetch("".concat(s,"/api/tasks?userId=").concat(t),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)})),updateTask:async(e,t,a)=>r(await fetch("".concat(s,"/api/tasks/").concat(e,"?userId=").concat(a),{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)})),deleteTask:async(e,t)=>r(await fetch("".concat(s,"/api/tasks/").concat(e,"?userId=").concat(t),{method:"DELETE"})),completeTask:async(e,t,a)=>r(await fetch("".concat(s,"/api/tasks/").concat(e,"/complete?userId=").concat(a),{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({actualTime:t})}))}}},function(e){e.O(0,[971,69,744],function(){return e(e.s=148)}),_N_E=e.O()}]);